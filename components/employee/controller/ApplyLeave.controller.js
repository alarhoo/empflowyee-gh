sap.ui.define(["./BaseController","sap/ui/core/Messaging","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,o,s,i){"use strict";const n=e.extend("com.alarhoo.empflowyee.components.employee.controller.ApplyLeave",{constructor:function(){e.apply(this,arguments);this._leaveRequestData={LeaveType:"sick",StartDate:null,EndDate:null,IsHalfDay:false,Approvers:[{key:"user1",text:"User 1"},{key:"user2",text:"User 2"}],Reason:""};this._leaveRequestModel=null;this._uiModel=null;this._isFormDirty=false}});n.prototype.onInit=function(){t.registerObject(this.getView(),true);this._initUIModel();this._initLeaveRequestModel();this.getView().addEventDelegate({onBeforeShow:function(){console.log("onBeforeShow called")},onBeforeHide:function(){console.log("onAfterHide called")},onAfterHide:function(){console.log("onAfterHide called")},onAfterShow:function(){console.log("onAfterShow called")}},this)};n.prototype._initUIModel=function(){const e=new Date;const t=new Date(e.getFullYear(),11,31);this._uiModel=new o({minDate:e,maxDate:t});this.getView().setModel(this._uiModel,"ui")};n.prototype._initLeaveRequestModel=function(){this._leaveRequestModel=new o(structuredClone(this._leaveRequestData));this._leaveRequestModel.attachPropertyChange(()=>{this._isFormDirty=true});this.getView().setModel(this._leaveRequestModel,"leaveRequest")};n.prototype._submitLeaveRequest=function(){const e=this._leaveRequestModel.getData();if(!e.LeaveType||!e.StartDate||!e.EndDate||!e.Reason){s.show("Please fill all fields");return}s.show("Leave request submitted")};n.prototype.onLeaveRequestSubmit=function(){this._submitLeaveRequest()};n.prototype.onLeaveRequestCancel=function(){this._leaveRequestModel.setData(structuredClone(this._leaveRequestData))};n.prototype.onAfterHide=function(){if(this._isFormDirty){i.confirm("You have unsaved changes. Do you want to leave?",{actions:["Yes","No"],onClose:e=>{if(e==="No"){const e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("ApplyLeave")}else{this._isFormDirty=false}}})}};n.prototype.onExit=function(){this._leaveRequestModel.detachPropertyChange(()=>{this._isFormDirty=false});t.removeAllMessages()};return n});
//# sourceMappingURL=ApplyLeave.controller.js.map