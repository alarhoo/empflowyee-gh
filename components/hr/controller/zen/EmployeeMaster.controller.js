sap.ui.define(["../BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/m/MessageToast","sap/ui/core/Fragment"],function(e,t,o,n,i,s,r){"use strict";const a="com.alarhoo.empflowyee.components.hr.controller.zen.EmployeeMaster";const l=e.extend(a,{constructor:function(){this._mViewSettingsDialogs=null;this._currentRouteName=null}});l.prototype.onInit=function(){this._mViewSettingsDialogs={};this._currentRouteName=this.getCurrentRouteName()};l.prototype.onListItemPress=async function(e){const t=await this.getOwnerComponent().getHelper();const o=t.getNextUIState(1);const n=e.getSource().getBindingContext("emp");if(n){const t=n.getObject();const i=t.EmpMainId;if(this._currentRouteName==="employeeEditViewRoute"){this.getRouter().navTo("employeeEditRoute",{layout:o.layout,employeeId:i})}else{this.getRouter().navTo("employeeDetailRoute",{layout:o.layout,employeeId:i})}const s=e.getSource();s.setNavigated(true)}else{const e="No binding context found for the clicked list item.";s.show(e);console.warn(e)}};l.prototype.onEmployeeListItemDetailPress=async function(e){const t=await this.getOwnerComponent().getHelper();const o=t.getNextUIState(1);const n=e.getSource().getBindingContext("emp");if(n){const e=n.getObject();const t=e.EmpMainId;this.getRouter().navTo("employeeEditRoute",{layout:o.layout,employeeId:t})}else{const e="No binding context found for the clicked list item.";s.show(e);console.warn(e)}};l.prototype.onEmployeeSortPress=function(){this._getViewSettingsDialog("com.alarhoo.empflowyee.components.hr.fragments.zen.SortDialog").then(function(e){e.open()})};l.prototype.onEmployeeFilterPress=function(){this._getViewSettingsDialog("com.alarhoo.empflowyee.components.hr.fragments.zen.FilterDialog").then(function(e){e.open()})};l.prototype.onEmployeeGroupPress=function(){this._getViewSettingsDialog("com.alarhoo.empflowyee.components.hr.fragments.zen.GroupDialog").then(function(e){e.open()})};l.prototype.onEmployeeExportPress=function(){s.show("Export functionality is not implemented yet.")};l.prototype.onEmployeeSortDialogConfirm=function(e){try{const t=this.byId("idEmployeeList");const o=t.getBinding("items");const n=e.getParameters();const i=n.sortItem.getKey();const s=n.sortDescending;const r=new sap.ui.model.Sorter(i,s);o.sort(r)}catch(e){console.error("Error during sort:",e);s.show("Failed to sort employee list.")}};l.prototype.onEmployeeFilterDialogConfirm=function(e){try{const t=this.byId("idEmployeeList");const i=t.getBinding("items");const s=e.getParameters();const r=[];s.filterItems.forEach(e=>{const t=e.getParent().getKey();const i=e.getKey();if(t&&i){r.push(new o(t,n.EQ,i))}});i.filter(r,"Application")}catch(e){console.error("Error during filter:",e);s.show("Failed to apply filters.")}};l.prototype.onEmployeeGroupDialogConfirm=function(e){try{const t=this.byId("idEmployeeList");const o=t.getBinding("items");const n=e.getParameters();const i=n.groupItem.getKey();const s=n.groupDescending;const r=new sap.ui.model.Sorter(i,s,true);t.setGroupHeaderFactory(function(e){return new sap.m.GroupHeaderListItem({title:e.key,upperCase:false})});o.sort(r)}catch(e){console.error("Error during grouping:",e);sap.m.MessageToast.show("Failed to group employees.")}};l.prototype.resetGroupDialog=function(){try{const e=this.byId("employeeTable");const t=e.getBinding("items");t.sort(null);s.show("Grouping reset.")}catch(e){console.error("Error while resetting group:",e);s.show("Failed to reset grouping.")}};l.prototype._getViewSettingsDialog=function(e){let t=this._mViewSettingsDialogs[e];if(!t){t=r.load({id:this.getView().getId(),name:e,controller:this}).then(function(e){if(i.system.desktop){e.addStyleClass("sapUiSizeCompact")}return e});this._mViewSettingsDialogs[e]=t}return t};l.prototype.onEmployeeSearch=function(e){try{const t=this.byId("idEmployeeList");const i=t.getBinding("items");const s=e.getParameter("query");const r=[];if(s){r.push(new o({filters:[new o("EmpMainFirst",n.Contains,s),new o("EmpMainLast",n.Contains,s),new o("EmpMainEmail",n.Contains,s)],and:false}))}i.filter(r,"Application")}catch(e){console.error("Error during search:",e);s.show("Search failed. Please try again.")}};return l});
//# sourceMappingURL=EmployeeMaster.controller.js.map